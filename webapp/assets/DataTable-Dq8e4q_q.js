import{_ as k,a as M,R as F,u as K,r as X}from"./index-BsrjhtPE.js";import{a3 as r,a4 as w,ad as f,al as Z,a5 as l,ae as N,Z as C,a8 as d,a9 as a,A as T,W as E,a6 as v,R as m,X as c,l as s,D as P,o as R,F as U,am as O,n as z,ap as G}from"./vue-BAjJ74_5.js";import{I as Q}from"./icon-dot-menu-C516iqHn.js";import{I as S}from"./icon-close-pH6A5HBf.js";import{ar as A,at as $,ap as B,a as D,V as W,B as Y,C as H,aC as ee,ai as q,a8 as y,ab as I}from"./vuetify-B6yzhMeP.js";import{S as te}from"./Spinner-Di2pvISG.js";const ae={},se={width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},le=Z('<title>icon-pending</title><desc>Created with Sketch.</desc><g id="IE-Admin" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Dashboard-Web-Developer-Certificate" transform="translate(-623.000000, -516.000000)" fill="#00E284"><g id="icon-approved" transform="translate(623.000000, 516.000000)"><g id="noun_Check_2248401"><g id="Group"><path d="M9,0 C4.02923077,0 0,4.02923077 0,9 C0,13.9707692 4.02923077,18 9,18 C13.9707692,18 18,13.9707692 18,9 C18,4.02923077 13.9707692,0 9,0 M9,1.38461538 C13.1988462,1.38461538 16.6153846,4.80115385 16.6153846,9 C16.6153846,13.1988462 13.1988462,16.6153846 9,16.6153846 C4.80115385,16.6153846 1.38461538,13.1988462 1.38461538,9 C1.38461538,4.80115385 4.80115385,1.38461538 9,1.38461538" id="Shape"></path><polygon id="Path" points="7.53161538 12.4276154 7.53230769 12.4283077 13.4106923 6.55061538 12.4310769 5.571 7.53161538 10.4711538 5.56892308 8.50846154 4.59 9.48738462 7.53092308 12.4283077"></polygon></g></g></g></g></g>',3);function oe(e,t){return r(),w("svg",se,[f(" Generator: Sketch 54.1 (76490) - https://sketchapp.com "),le])}const ne=k(ae,[["render",oe],["__file","C:/Users/guilh/Documents/EIDCMP/web-app-v3/src/assets/icon-approved.vue"]]),re={},ie={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},de=l("g",{fill:"none","fill-rule":"evenodd"},[l("g",{fill:"#F79520","fill-rule":"nonzero"},[l("g",null,[l("path",{d:"M9 0C4.037 0 0 4.037 0 9s4.037 9 9 9 9-4.037 9-9-4.038-9-9-9zm0 16.624c-4.204 0-7.624-3.42-7.624-7.624S4.796 1.376 9 1.376 16.624 4.796 16.624 9 13.204 16.624 9 16.624zm.688-13.857H8.312v6.518l3.35 3.35.973-.973-2.947-2.947V2.767z",transform:"translate(-622 -659) translate(622 659)"})])])],-1),ce=[de];function ue(e,t){return r(),w("svg",ie,[...ce])}const pe=k(re,[["render",ue],["__file","C:/Users/guilh/Documents/EIDCMP/web-app-v3/src/assets/icon-pending.vue"]]),me={},fe={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},he=l("g",{fill:"none","fill-rule":"evenodd"},[l("g",{fill:"#E95E5E","fill-rule":"nonzero"},[l("g",null,[l("path",{d:"M9 .41C4.255.41.41 4.254.41 9c0 4.745 3.845 8.59 8.59 8.59 4.745 0 8.59-3.845 8.59-8.59C17.59 4.255 13.746.41 9 .41zm0 15.954c-4.067 0-7.364-3.297-7.364-7.364S4.933 1.636 9 1.636 16.364 4.933 16.364 9 13.067 16.364 9 16.364zM9 .409C4.255.41.41 4.255.41 9c0 4.745 3.845 8.59 8.59 8.59 4.745 0 8.59-3.845 8.59-8.59C17.59 4.255 13.746.41 9 .41zm0 15.955c-4.067 0-7.364-3.297-7.364-7.364S4.933 1.636 9 1.636 16.364 4.933 16.364 9 13.067 16.364 9 16.364z",transform:"translate(-584.000000, -963.000000) translate(584.000000, 963.000000)"}),l("path",{d:"M12.273 6.389L9.661 9 12.273 11.611 11.611 12.273 9 9.661 6.389 12.273 5.727 11.611 8.339 9 5.727 6.389 6.389 5.727 9 8.339 11.611 5.727z",transform:"translate(-584.000000, -963.000000) translate(584.000000, 963.000000)"})])])],-1),Ce=[he];function _e(e,t){return r(),w("svg",fe,[...Ce])}const ve=k(me,[["render",_e],["__file","C:/Users/guilh/Documents/EIDCMP/web-app-v3/src/assets/icon-revoked-table.vue"]]),be={},ge={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},we=l("g",{fill:"none","fill-rule":"evenodd"},[l("g",{fill:"#009FB1","fill-rule":"nonzero"},[l("g",null,[l("path",{d:"M9 0C4.037 0 0 4.037 0 9s4.037 9 9 9 9-4.037 9-9-4.038-9-9-9zm0 16.624c-4.204 0-7.624-3.42-7.624-7.624S4.796 1.376 9 1.376 16.624 4.796 16.624 9 13.204 16.624 9 16.624zm.688-13.857H8.312v6.518l3.35 3.35.973-.973-2.947-2.947V2.767z",transform:"translate(-623 -418) translate(623 418)"})])])],-1),ke=[we];function $e(e,t){return r(),w("svg",ge,[...ke])}const Me=k(be,[["render",$e],["__file","C:/Users/guilh/Documents/EIDCMP/web-app-v3/src/assets/icon-waiting-wallet.vue"]]),De={name:"RevokeCertModal",components:{IconClose:S},props:{userData:{required:!0}},emits:["back","close"],computed:{...N(M,["caName","photoURL","loading"])},created(){this.$debug(this.userData)},methods:{cancel(){M()[F]({user:this.userData}).then(()=>this.close()).catch(e=>{useGlobalStore().setErrorMessage(e.message||e)})},back(){this.$emit("back")},close(){this.$emit("close")}}},Ve={class:"modal-backdrop"},ye={id:"modalTitle",class:"modal-header"},Ie={class:"modal-body text-center px-16 pb-9"},Te=["innerHTML"],Pe={class:"modal-footer"};function Ee(e,t,u,h,o,n){const g=C("IconClose");return r(),d(R,{name:"modal-fade",persisted:""},{default:a(()=>[T(l("div",Ve,[l("div",{class:"modal-wallid card_modal",role:"dialog","aria-labelledby":"modalTitle","aria-describedby":"modalDescription",onClick:t[3]||(t[3]=E(()=>{},["stop"]))},[l("header",ye,[v(e.$slots,"header",{},()=>[m(c(e.$t("revokeModal.title"))+" ",1),s(A),l("button",{type:"button",class:"btn-close","aria-label":"Close modal",onClick:t[0]||(t[0]=(..._)=>n.close&&n.close(..._))},[s(g)])])]),l("div",Ie,[v(e.$slots,"body",{},()=>[s($,{cols:"12",md:"12",class:"pb-16 pt-7 px-16 text-center"},{default:a(()=>[l("p",{innerHTML:e.$t("revokeModal.text")},null,8,Te)]),_:1})])]),l("div",Pe,[v(e.$slots,"footer",{},()=>[s(B,{class:"justify-end","no-gutters":""},{default:a(()=>[s(D,{class:"back-type-2 mr-4",onClick:t[1]||(t[1]=_=>n.back())},{default:a(()=>[m(c(e.$t("button.back")),1)]),_:1}),s(D,{class:"delete",loading:e.loading,disabled:e.loading,onClick:t[2]||(t[2]=_=>n.cancel())},{default:a(()=>[m(c(e.$t("revokeModal.button")),1)]),_:1},8,["loading","disabled"])]),_:1})])])])],512),[[P,!0]])]),_:3})}const Le=k(De,[["render",Ee],["__file","C:/Users/guilh/Documents/EIDCMP/web-app-v3/src/modals/RevokeCertModal.vue"]]),Ne={name:"ViewCancelCertModal",components:{IconClose:S},props:{userData:{required:!0}},emits:["back","close"],computed:{...N(M,["caName","photoURL","loading"])},created(){this.$debug(this.userData)},methods:{cancel(){M()[F]({user:this.userData}).then(()=>this.close()).catch(e=>{K().setErrorMessage(e.message||e)})},back(){this.$emit("back")},close(){this.$emit("close")}}},Re={class:"modal-backdrop"},Se={id:"modalTitle",class:"modal-header"},Ae={class:"modal-body text-center px-16 pb-9"},Be=["innerHTML"],Ue={class:"modal-footer"};function Oe(e,t,u,h,o,n){const g=C("IconClose");return r(),d(R,{name:"modal-fade",persisted:""},{default:a(()=>[T(l("div",Re,[l("div",{class:"modal-wallid card_modal",role:"dialog","aria-labelledby":"modalTitle","aria-describedby":"modalDescription",onClick:t[3]||(t[3]=E(()=>{},["stop"]))},[l("header",Se,[v(e.$slots,"header",{},()=>[m(c(e.$t("cancelModal.title"))+" ",1),s(A),l("button",{type:"button",class:"btn-close","aria-label":"Close modal",onClick:t[0]||(t[0]=(..._)=>n.close&&n.close(..._))},[s(g)])])]),l("div",Ae,[v(e.$slots,"body",{},()=>[s($,{cols:"12",md:"12",class:"pb-16 pt-7 px-16 text-center"},{default:a(()=>[l("p",{innerHTML:e.$t("cancelModal.text")},null,8,Be)]),_:1})])]),l("div",Ue,[v(e.$slots,"footer",{},()=>[s(B,{class:"justify-end","no-gutters":""},{default:a(()=>[s(D,{class:"back-type-2 mr-4",onClick:t[1]||(t[1]=_=>n.back())},{default:a(()=>[m(c(e.$t("button.back")),1)]),_:1}),s(D,{class:"delete",loading:e.loading,disabled:e.loading,onClick:t[2]||(t[2]=_=>n.cancel())},{default:a(()=>[m(c(e.$t("button.cancel")),1)]),_:1},8,["loading","disabled"])]),_:1})])])])],512),[[P,!0]])]),_:3})}const ze=k(Ne,[["render",Oe],["__file","C:/Users/guilh/Documents/EIDCMP/web-app-v3/src/modals/ViewCancelCertModal.vue"]]),Ge={name:"ViewCredentialCardModal",components:{IconClose:S,Spinner:te},props:{userData:{required:!0},templateItens:{required:!0},frontendProps:{default:()=>{}}},emits:["close","cancel"],data(){return{isLoaded:!1,backTemplate:null,templateValues:[],templateName:"",imageArray:[]}},computed:{...N(M,["caName","photoURL","excelTemplate","tid","caName","credName","urlPhoto","cardHeaders","customTemplateName"])},watch:{},async mounted(){const{data:e}=await this.$store.dispatch(X,{id:this.userData.id});this.templateName=e.template_name,this.imageArray=e.imgArray;const t=JSON.parse(JSON.stringify(e.user_data)),u=JSON.parse(JSON.stringify(e));if(delete u.tables,this.templateItens)for(let h=0;h<this.templateItens.length;h++){const o=this.templateItens[h];["image"].includes(o.attr.toLowerCase())||o.inputType==="image"?this.templateValues.unshift({attr:o.attr,value:t[o.attr],type:o.type}):t[o.attr]&&this.templateValues.push({attr:o.attr,value:t[o.attr],type:o.type})}else for(const h in u){const o=u[h];this.templateValues.push({attr:h,value:o})}},created(){},methods:{close(){this.$emit("close")},cancel(){this.$emit("cancel")},onImgLoad(){this.isLoaded=!0}}},We={class:"modal-backdrop"},He={id:"modalTitle",class:"modal-header"},qe={class:"modal-body px-16 pb-16 pt-2 mb-1"},Fe={class:"title-header"},je={key:0},xe={class:"title-header mb-4"};function Je(e,t,u,h,o,n){const g=C("IconClose"),_=C("Spinner");return r(),d(R,{name:"modal-fade",persisted:""},{default:a(()=>[T(l("div",We,[l("div",{class:"modal-wallid card_modal",role:"dialog","aria-labelledby":"modalTitle","aria-describedby":"modalDescription",onClick:t[1]||(t[1]=E(()=>{},["stop"]))},[l("header",He,[v(e.$slots,"header",{},()=>[m(c(e.$t("viewCredential.modal.title"))+" ",1),s(A),l("button",{type:"button",class:"btn-close","aria-label":"Close modal",onClick:t[0]||(t[0]=(...p)=>n.close&&n.close(...p))},[s(g)])])]),l("div",qe,[v(e.$slots,"body",{},()=>[s($,{cols:"12",md:"12",class:"pb-16 view-credential"},{default:a(()=>[s(B,null,{default:a(()=>[s($,{cols:"12"},{default:a(()=>[l("h2",Fe,c(o.templateName),1)]),_:1}),(r(!0),w(U,null,O(o.templateValues,(p,V)=>(r(),d($,{key:`attribute-${V}`,cols:"6"},{default:a(()=>[p.type==="blank"?(r(),w("div",je)):p.type==="image"?(r(),d(W,{key:1,src:p.value,width:"80",height:"80",class:"mx-auto",onLoad:n.onImgLoad},null,8,["src","onLoad"])):(r(),d(Y,{key:2,modelValue:p.value,"onUpdate:modelValue":L=>p.value=L,label:e.$te(`drivingLicense.attributes.${p.attr.toLowerCase()}`)?e.$t(`drivingLicense.attributes.${p.attr.toLowerCase()}`):p.attr,readonly:"",outlined:"",dense:"","hide-details":"false"},null,8,["modelValue","onUpdate:modelValue","label"]))]),_:2},1024))),128)),s($,{cols:"12"},{default:a(()=>[l("h2",xe,c(e.$t("viewCredential.preview")),1),(r(!0),w(U,null,O(o.imageArray,(p,V)=>(r(),d(W,{key:`image-${V}`,src:p,class:"mx-auto"},null,8,["src"]))),128))]),_:1})]),_:1}),T(s(_,null,null,512),[[P,!o.isLoaded]])]),_:1})])]),f(` <div class="modal-footer">
          <slot name="footer">
            <v-row class="justify-end" no-gutters>
              <v-btn class="delete" @click="cancel()">
                {{ $t('button.cancel') }}
              </v-btn>
            </v-row>
          </slot>
        </div> `)])],512),[[P,!0]])]),_:3})}const Ke=k(Ge,[["render",Je],["__file","C:/Users/guilh/Documents/EIDCMP/web-app-v3/src/modals/ViewCredentialCardModal.vue"]]);var Xe={};const Ze={name:"DataTable",components:{IconPending:pe,IconApproved:ne,IconRevoked:ve,IconWaiting:Me,ViewCredCardModal:Ke,ViewCancelCertModal:ze,IconMenu:Q,RevokeCertModal:Le},props:{search:{},headers:{required:!0},items:{required:!0},tableOptions:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["update-table","updateTable"],data(){return{userData:{},showViewCredentialCardModal:!1,showViewCancelCertModal:!1,showRevokeCertModal:!1,snackbar:!1,frontendProps:null,templateItens:null}},created(){},methods:{getTemplate(e){const t=M(),{templates:u}=t;return u.find(h=>h.tid===e)},view(e){const t=this.getTemplate(e.tid);this.userData=e,this.userData.certName=t.name,this.frontendProps=t.frontend_props,this.templateItens=t.templateItens,this.showViewCredentialCardModal=!0},download(e){let t;e.pdf_url?window.open(e.pdf_url):(Xe.VUE_APP_AMBIENT==="DEMO"?t="https://demo.mycredentials.wallid.io/ViewCredential/":t="https://mycredentials.wallid.io/ViewCredential/",window.open(t+e.id))},revoke(e){this.userData.id=e.id,this.userData.tid=e.tid,this.showRevokeCertModal=!0},cancel(e){this.userData.id=e.id,this.userData.tid=e.tid,this.showViewCancelCertModal=!0},back(){this.showRevokeCertModal=!1,this.showViewCancelCertModal=!1,this.userData.user_data&&(this.showViewCredentialCardModal=!0)},updateTable(){this.userData={},this.$emit("updateTable")},approveAll(e){for(let t=0;t<this.items.length;t++)this.approve(this.items[t])}}};function Qe(e,t,u,h,o,n){const g=C("IconMenu"),_=C("IconPending"),p=C("IconWaiting"),V=C("IconApproved"),L=C("IconRevoked"),j=C("ViewCredCardModal"),x=C("RevokeCertModal"),J=C("ViewCancelCertModal");return r(),w("div",null,[s(ee,{class:"dca-table",search:u.search,headers:u.headers[e.$i18n.locale],items:u.items,"no-results-text":e.$t("table.noData"),"items-per-page":10,"hide-default-footer":u.items.length<10,"hide-default-header":u.items.length===0,loading:u.loading},{"no-data":a(()=>[v(e.$slots,"empty-table")]),"header.actions":a(({item:i})=>[s(H,{bottom:"",left:"","nudge-width":200,"offset-y":""},{activator:a(({on:b})=>[T(s(D,z({ripple:!1,class:"dot-menu",icon:""},G(b)),{default:a(()=>[s(g)]),_:2},1040),[[P,u.tableOptions]])]),default:a(()=>[v(e.$slots,"actions",{},()=>[s(q,{ripple:!1,class:"dot-menu"},{default:a(()=>[s(y,{ripple:!1,onClick:b=>n.approveAll(i)},{default:a(()=>[s(I,{class:"menu-title"},{default:a(()=>[m(c(e.$t("table.menu.all")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024)]),"item.public_field":a(({item:i})=>[m(c(i.public_field.value)+" ("+c(i.public_field.attr)+") ",1)]),"item.status":a(({item:i})=>[l("div",null,[i.status===e.PENDING_APPROVAL?(r(),d(_,{key:0})):f("v-if",!0),i.status===e.WAITING_WALLET?(r(),d(p,{key:1})):f("v-if",!0),i.status===e.APPROVED?(r(),d(V,{key:2})):f("v-if",!0),i.status===e.REVOKED?(r(),d(L,{key:3})):f("v-if",!0),m(" "+c(e.$t(`status.${i.status}`)),1)])]),"item.actions":a(({item:i})=>[s(H,{bottom:"",left:"","nudge-width":200,"offset-y":""},{activator:a(({on:b})=>[s(D,z({ripple:!1,class:"dot-menu",icon:""},G(b)),{default:a(()=>[s(g)]),_:2},1040)]),default:a(()=>[v(e.$slots,"actions",{},()=>[s(q,{ripple:!1,class:"dot-menu"},{default:a(()=>[s(y,{ripple:!1,onClick:[t[0]||(t[0]=E(()=>{},["stop"])),b=>n.view(i)]},{default:a(()=>[s(I,{class:"menu-title"},{default:a(()=>[m(c(e.$t("table.menu.view")),1)]),_:1})]),_:2},1032,["onClick"]),f("v-if",!0),i.status===e.PENDING_APPROVAL?(r(),d(y,{key:1,ripple:!1,onClick:b=>e.approve(i)},{default:a(()=>[s(I,{class:"menu-title"},{default:a(()=>[m(c(e.$t("table.menu.approve")),1)]),_:1})]),_:2},1032,["onClick"])):f("v-if",!0),i.status===e.APPROVED?(r(),d(y,{key:2,ripple:!1,onClick:b=>n.revoke(i)},{default:a(()=>[s(I,{class:"menu-title"},{default:a(()=>[m(c(e.$t("table.menu.revoke")),1)]),_:1})]),_:2},1032,["onClick"])):f("v-if",!0),i.status===e.PENDING_APPROVAL||i.status===e.WAITING_WALLET?(r(),d(y,{key:3,ripple:!1,onClick:b=>n.cancel(i)},{default:a(()=>[s(I,{class:"menu-title"},{default:a(()=>[m(c(e.$t("table.menu.cancel")),1)]),_:1})]),_:2},1032,["onClick"])):f("v-if",!0)]),_:2},1024)])]),_:2},1024)]),_:2},1032,["search","headers","items","no-results-text","hide-default-footer","hide-default-header","loading"]),o.showViewCredentialCardModal?(r(),d(j,{key:0,"frontend-props":o.frontendProps,"user-data":o.userData,"template-itens":o.templateItens,onClose:t[1]||(t[1]=()=>{o.showViewCredentialCardModal=!1,n.updateTable()}),onCancel:t[2]||(t[2]=i=>(o.showViewCancelCertModal=!0,o.showViewCredentialCardModal=!1))},null,8,["frontend-props","user-data","template-itens"])):f("v-if",!0),o.showRevokeCertModal?(r(),d(x,{key:1,"user-data":o.userData,onClose:t[3]||(t[3]=()=>{o.showRevokeCertModal=!1,n.updateTable()}),onBack:n.back,onCancel:n.cancel},null,8,["user-data","onBack","onCancel"])):f("v-if",!0),o.showViewCancelCertModal?(r(),d(J,{key:2,"user-data":o.userData,onClose:t[4]||(t[4]=()=>{o.showViewCancelCertModal=!1,n.updateTable()}),onBack:n.back,onCancel:n.cancel},null,8,["user-data","onBack","onCancel"])):f("v-if",!0)])}const ot=k(Ze,[["render",Qe],["__file","C:/Users/guilh/Documents/EIDCMP/web-app-v3/src/components/DataTable/DataTable.vue"]]);export{ot as D};
//# sourceMappingURL=DataTable-Dq8e4q_q.js.map
