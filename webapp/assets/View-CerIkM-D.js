import{_ as f,d as G,a as x,l as R,G as Z,q as r}from"./index-BsrjhtPE.js";import{a3 as u,a4 as h,a5 as i,ad as E,al as T,ae as k,Z as p,a8 as m,a9 as t,l as e,X as a,n as U,ap as O,R as d,am as z,F}from"./vue-BAjJ74_5.js";import{e as W}from"./no-pending-tasks-DdWG3RO1.js";import{D as H}from"./DataTable-Dq8e4q_q.js";import{c as q,at as c,ap as w,V as L,C as K,a as X,ai as j,a8 as I,ab as V,aD as J,aE as _,B as Q,aw as g,av as b}from"./vuetify-B6yzhMeP.js";/* empty css                            */import"./icon-dot-menu-C516iqHn.js";import"./icon-close-pH6A5HBf.js";import"./Spinner-Di2pvISG.js";const Y={},ee={xmlns:"http://www.w3.org/2000/svg",width:"11",height:"10",viewBox:"0 0 11 10"},te=i("g",{fill:"none","fill-rule":"evenodd"},[i("g",{fill:"#009FB1","fill-rule":"nonzero"},[i("g",null,[i("path",{d:"M14.409 19L14.409 22.231 10.179 22.231 10.179 23.769 14.409 23.769 14.409 28 15.948 28 15.948 23.769 20.179 23.769 20.179 22.231 15.948 22.231 15.948 18 14.409 18z",transform:"translate(-965 -456) translate(955 438)"})])])],-1),se=[te];function ae(s,l){return u(),h("svg",ee,[...se])}const le=f(Y,[["render",ae],["__file","C:/Users/guilh/Documents/EIDCMP/web-app-v3/src/assets/icon-add.vue"]]),ne={},ie={width:"50px",height:"50px",viewBox:"0 0 50 50",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},oe=T('<title>icon-pending-credentials</title><desc>Created with Sketch.</desc><g id="WalliD-2.6-(Template-creator)" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Dashboard&gt;credencialprofissional" transform="translate(-1035.000000, -606.000000)"><g id="icon-approved-credentials" transform="translate(1035.000000, 606.000000)"><g id="Group-6" stroke-width="1" fill-rule="evenodd" fill="#D9FBED"><circle id="Oval" cx="25" cy="25" r="25"></circle></g><path d="M25,15 C19.4771798,15 15,19.4771798 15,25 C15,30.5228202 19.4771798,35 25,35 C30.5228202,35 35,30.5228202 35,25 C35,19.4771798 30.5228202,15 25,15 Z M25,33.6111111 C20.244224,33.6111111 16.3888889,29.755776 16.3888889,25 C16.3888889,20.244224 20.244224,16.3888889 25,16.3888889 C29.755776,16.3888889 33.6111111,20.244224 33.6111111,25 C33.6111111,29.755776 29.755776,33.6111111 25,33.6111111 Z M25,15 C19.4771798,15 15,19.4771798 15,25 C15,30.5228202 19.4771798,35 25,35 C30.5228202,35 35,30.5228202 35,25 C35,19.4771798 30.5228202,15 25,15 Z M25,33.6111111 C20.244224,33.6111111 16.3888889,29.755776 16.3888889,25 C16.3888889,20.244224 20.244224,16.3888889 25,16.3888889 C29.755776,16.3888889 33.6111111,20.244224 33.6111111,25 C33.6111111,29.755776 29.755776,33.6111111 25,33.6111111 Z M24.7096751,27.8882895 L24.7092295,27.8878449 L23.9844198,28.6111111 L20.5555556,25.1895482 L21.4989444,24.2481681 L23.9848654,26.7287957 L28.5010556,22.2222222 L29.4444444,23.1636023 L24.7096751,27.8882895 Z" id="Shape" stroke="#00E284" stroke-width="0.4" fill="#00E284" fill-rule="nonzero"></path></g></g></g>',3);function re(s,l){return u(),h("svg",ie,[E(" Generator: Sketch 54.1 (76490) - https://sketchapp.com "),oe])}const de=f(ne,[["render",re],["__file","C:/Users/guilh/Documents/EIDCMP/web-app-v3/src/assets/icon-approved-credentials.vue"]]),ce={},ue={width:"50px",height:"50px",viewBox:"0 0 50 50",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},pe=T('<title>icon-pending-credentials</title><desc>Created with Sketch.</desc><g id="WalliD-2.6-(Template-creator)" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Dashboard&gt;credencialprofissional" transform="translate(-1035.000000, -328.000000)"><g id="icon-credential-templates" transform="translate(1035.000000, 328.000000)"><g id="Group-4"><g id="Group-6" fill="#DBEDEF"><circle id="Oval" cx="25" cy="25" r="25"></circle></g><g id="noun_Certificate_1117192" transform="translate(14.705882, 11.764706)"><g id="Group" transform="translate(0.404008, 0.565611)"><g id="Group-3"></g></g></g></g><g id="Group-2" transform="translate(14.705882, 11.764706)" fill="#009FB1"><g id="noun_certification_1525813-(1)" fill-rule="nonzero" stroke="#009FB1" stroke-width="0.3"><g id="Group"><path d="M10.2941229,5.32907052e-15 C9.37877581,5.32907052e-15 8.62480653,0.77048451 8.62480653,1.70588235 C8.62480653,1.86201079 8.64638718,2.01522478 8.68566703,2.15900735 L2.17359429,7.09007353 C2.16767126,7.09586573 2.16187362,7.10179036 2.15620558,7.10784314 L0.556444054,7.10784314 C0.539064902,7.10700981 0.521657069,7.10700981 0.504277917,7.10784314 C0.217514091,7.13546184 -0.00123668836,7.38212939 5.26191671e-06,7.67647059 L5.26191671e-06,21.3235294 C3.60180207e-05,21.6375607 0.249144135,21.8921254 0.556444054,21.8921569 L7.0859055,21.8921569 C7.13159636,21.9812648 7.18129775,22.0651149 7.23370955,22.1498162 L7.23370955,27.0882353 C7.23371552,27.289564 7.33788875,27.475884 7.50760919,27.5781212 C7.67732963,27.6803585 7.88729817,27.683273 8.05967339,27.5857843 L10.2941229,26.3152574 L12.5285724,27.5857843 C12.7009476,27.683273 12.9109162,27.6803585 13.0806366,27.5781212 C13.2503571,27.475884 13.3545303,27.289564 13.3545363,27.0882353 L13.3545363,22.1498162 C13.4068279,22.0651149 13.4567602,21.9812648 13.5023403,21.8921569 L20.0318018,21.8921569 C20.3391017,21.8921254 20.5882098,21.6375607 20.5882406,21.3235294 L20.5882406,7.67647059 C20.5882098,7.36243934 20.3391017,7.10787457 20.0318018,7.10784314 L18.4320402,7.10784314 C18.4263722,7.10179036 18.4205746,7.09586573 18.4146515,7.09007353 L11.9025788,2.15012255 C11.9401651,2.00925334 11.9634393,1.85848709 11.9634393,1.70588235 C11.9634393,0.77048451 11.20947,5.32907052e-15 10.2941229,5.32907052e-15 Z M10.2941229,1.1372549 C10.6080262,1.1372549 10.8505617,1.38510255 10.8505617,1.70588235 C10.8505617,2.02665931 10.6080262,2.2745098 10.2941229,2.2745098 C9.98021965,2.2745098 9.73768412,2.02665931 9.73768412,1.70588235 C9.73768412,1.38510255 9.98021965,1.1372549 10.2941229,1.1372549 Z M9.32035502,3.08302696 C9.59571043,3.28613926 9.93119183,3.41176471 10.2941229,3.41176471 C10.657054,3.41176471 10.9925354,3.28613926 11.2678908,3.08302696 L16.5627537,7.10784314 L4.02549215,7.10784314 L9.32035502,3.08302696 Z M1.11288285,8.24509804 L19.475363,8.24509804 L19.475363,20.754902 L13.8588089,20.754902 C13.8876775,20.5673766 13.9109751,20.3817911 13.9109751,20.1862745 C13.9109751,18.1517255 12.285064,16.4901961 10.2941229,16.4901961 C8.30318185,16.4901961 6.67727076,18.1517255 6.67727076,20.1862745 C6.67727076,20.3815682 6.6918553,20.5675802 6.72074254,20.754902 L1.11288285,20.754902 L1.11288285,8.24509804 Z M10.2941229,17.627451 C11.6836201,17.627451 12.7980975,18.7663549 12.7980975,20.1862745 C12.7980975,21.6062225 11.6836201,22.745098 10.2941229,22.745098 C8.90462569,22.745098 7.79014835,21.6062225 7.79014835,20.1862745 C7.79014835,18.7663549 8.90462569,17.627451 10.2941229,17.627451 Z M8.34658714,23.2959559 C8.91052756,23.6673882 9.57689473,23.8823529 10.2941229,23.8823529 C11.0113511,23.8823529 11.6785474,23.6673882 12.2416587,23.2959559 L12.2416587,26.1197917 L10.5636479,25.1691176 C10.395955,25.0742515 10.1922908,25.0742515 10.0245979,25.1691176 L8.34658714,26.1197917 L8.34658714,23.2959559 Z" id="Shape"></path></g></g><polygon id="Path" points="4.41176471 13.2352941 16.1764706 13.2352941 16.1764706 14.7058824 4.41176471 14.7058824"></polygon><polygon id="Path" points="4.41176471 10.2941176 16.1764706 10.2941176 16.1764706 11.7647059 4.41176471 11.7647059"></polygon></g></g></g></g>',3);function fe(s,l){return u(),h("svg",ue,[E(" Generator: Sketch 54.1 (76490) - https://sketchapp.com "),pe])}const he=f(ce,[["render",fe],["__file","C:/Users/guilh/Documents/EIDCMP/web-app-v3/src/assets/icon-issued-credentials-blue.vue"]]),me={},_e={xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",viewBox:"0 0 50 50"},ge=T('<g fill="none" fill-rule="evenodd"><g fill="#E95E5E"><g><circle cx="25" cy="25" r="25" opacity=".152"></circle><g fill-rule="nonzero" stroke="#E95E5E" stroke-width=".5"><path d="M14.289 6.578L10.867 10l3.422 3.422-.867.867L10 10.867l-3.422 3.422-.867-.867L9.133 10 5.711 6.578l.867-.867L10 9.133l3.422-3.422.867.867zM20 10c0 5.511-4.489 10-10 10S0 15.511 0 10 4.489 0 10 0s10 4.489 10 10zm-1.222 0c0-4.844-3.934-8.778-8.778-8.778S1.222 5.156 1.222 10 5.156 18.778 10 18.778s8.778-3.934 8.778-8.778z" transform="translate(15 15)"></path></g></g></g></g>',1),be=[ge];function Ce(s,l){return u(),h("svg",_e,[...be])}const ve=f(me,[["render",Ce],["__file","C:/Users/guilh/Documents/EIDCMP/web-app-v3/src/assets/icon-revoked-credentials.vue"]]),C=G("ViewTemplate"),we={name:"ViewTemplate",title:"pageTitle.viewTemplate",components:{DataTable:H,IconAdd:le,IconRevokedCredentials:ve,IconApprovedCredentials:de,IconIssuedCredentials:he},props:{tid:{required:!0}},data(){return{loadingTable:!0,tab:0,issueCertificateModal:!1,shownInBulkModal:!1,userData:{},search:"",hasPendingApproval:!1,allEntriesTable:[],pendingTable:[],approvedTable:[],revokedTable:[],cardHeaders:[],emptyTablePhoto:W,message:"",successModal:!1,credentialsHeaders:{en:[{text:"Public Attr",align:"start",value:"public_field.value"},{text:"Credential ID",value:"id"},{text:"Status",value:"status",sortable:!1,filterable:!1},{text:"Actions",value:"actions",sortable:!1,filterable:!1}],pt:[{text:"Atributo público",align:"start",value:"public_field.value"},{text:"ID de Credencial",value:"id"},{text:"Estado ",value:"status",sortable:!1,filterable:!1},{text:"Acções",value:"actions",sortable:!1,filterable:!1}],es:[{text:"Atributo público",align:"start",value:"public_field.value"},{text:"ID de Credencial",value:"id"},{text:"Estado ",value:"status",sortable:!1,filterable:!1},{text:"Acciónes",value:"actions",sortable:!1,filterable:!1}]},dataTableStructure:[{key:"allEntriesTable",entries:[],emptyTableMessage:"viewCredential.noCredentials[0]"},{key:"pendingTable",entries:[],emptyTableMessage:"viewCredential.pending"},{key:"approvedTable",entries:[],emptyTableMessage:"viewCredential.approved"},{key:"revokedTable",entries:[],emptyTableMessage:"viewCredential.revoked"}]}},computed:{...k(x,["cid","caName","profilePhotoUrl","totalIssuedCredentials","allowedCredentials"]),...k(R,["template"]),templatePreview(){return this.template?.frontend_props?.preview},canIssueCred(){return this.totalIssuedCredentials>=this.allowedCredentials},getDesignType(){return this.template?.frontend_props?.design},getTemplateName(){return this.template?.frontend_props?.customTemplateName}},watch:{template(){this.getTemplate()}},created(){this.$debug(`*** ${this.$options.name} ***`)},mounted(){this.template?.name&&this.getTemplate()},methods:{updateTable(){this.getTemplate()},closeSuccessModal(){this.updateTable(),this.successModal=!1},closeInBulkModal(){this.updateTable(),this.shownInBulkModal=!1},getTemplate(){C("tid",this.tid),C("tid",this.template),this.loadingTable=!0,x()[Z]({tid:this.tid}).then(s=>{this.loadingTable=!1,s&&(this.revokedTable=[],this.approvedTable=[],C("template",s),this.allEntriesTable=s.users.map(l=>({...l,status:[r.APPROVED,r.PENDING_APPROVAL,r.WAITING_WALLET].includes(l.status)?r.APPROVED:l.status})),s.users.forEach(l=>{l.status===r.REVOKED?this.revokedTable.push({...l,status:r.REVOKED}):[r.APPROVED,r.PENDING_APPROVAL,r.WAITING_WALLET].includes(l.status)&&this.approvedTable.push({...l,status:r.APPROVED})}),s.users.length>0&&(C(s.users[0].public_field.attr),this.credentialsHeaders[this.$i18n.locale][0]={text:s.users[0].public_field.attr,align:"start",value:"public_field.value"}))})},closeIssueCertificate(){this.issueCertificateModal=!1}}},Te={class:"title_header"},xe={class:"subtitle_header"},ke={class:"light_text text-center mb-0 mx-auto",style:{"max-width":"350px"}};function Le(s,l,Ie,Ve,n,v){const D=p("IconAdd"),M=p("router-link"),y=p("DataTable"),P=p("v-tab-item"),A=p("v-tabs-items"),$=p("IconIssuedCredentials"),B=p("IconRevokedCredentials"),S=p("IconApprovedCredentials");return u(),m(q,{class:"px-0"},{default:t(()=>[e(w,null,{default:t(()=>[e(c,{cols:"12",md:"9",class:"pr-16"},{default:t(()=>[e(w,null,{default:t(()=>[e(c,{cols:"12",class:"pt-0"},{default:t(()=>[e(L,{class:"mt-5 mb-3",contain:"","max-height":"95","max-width":"105",src:v.templatePreview},null,8,["src"]),i("h1",Te,a(s.template.name),1)]),_:1}),e(c,{cols:"8",class:"pt-4"},{default:t(()=>[i("h2",xe,a(s.$t("issue.pageTitle")),1)]),_:1}),e(c,{cols:"4",class:"pt-4 text-right"},{default:t(()=>[(u(),m(K,{key:1,bottom:"",left:"","offset-y":!0,class:"dot-menu","content-class":"dot-menu"},{activator:t(({on:o})=>[e(X,U({disabled:v.canIssueCred,class:"next"},O(o)),{default:t(()=>[e(D),d(a(s.$t("issue.new")),1)]),_:2},1040,["disabled"])]),default:t(()=>[e(j,{ripple:!1,class:"dot-menu"},{default:t(()=>[e(I,{ripple:!1,to:{path:"IssueCredentials"}},{default:t(()=>[e(V,{class:"menu-title"},{default:t(()=>[d(a(s.$t("issue.menu[0]")),1)]),_:1})]),_:1}),e(I,{disabled:"",ripple:!1,to:{path:"IssueInBulk"}},{default:t(()=>[e(V,{class:"menu-title"},{default:t(()=>[d(a(s.$t("issue.menu[1]")),1)]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),e(c,{cols:"12",class:"tables-view"},{default:t(()=>[e(J,{modelValue:n.tab,"onUpdate:modelValue":l[2]||(l[2]=o=>n.tab=o),"show-arrows":!1,"fixed-tabs":""},{default:t(()=>[e(_,{href:"#tab-1",class:"menu_text"},{default:t(()=>[d(a(s.$t("viewCredential.tabs[0]"))+" ("+a(n.allEntriesTable.length)+") ",1)]),_:1}),e(_,{href:"#tab-2",class:"menu_text"},{default:t(()=>[d(a(s.$t("viewCredential.tabs[1]"))+" ("+a(n.pendingTable.length)+") ",1)]),_:1}),e(_,{href:"#tab-3",class:"menu_text"},{default:t(()=>[d(a(s.$t("viewCredential.tabs[2]"))+" ("+a(n.approvedTable.length)+") ",1)]),_:1}),e(_,{href:"#tab-4",class:"menu_text"},{default:t(()=>[d(a(s.$t("viewCredential.tabs[3]"))+" ("+a(n.revokedTable.length)+") ",1)]),_:1}),e(Q,{modelValue:n.search,"onUpdate:modelValue":l[1]||(l[1]=o=>n.search=o),class:"search-table","append-icon":"mdi-magnify",label:s.$t("table.search"),"single-line":"","hide-details":""},null,8,["modelValue","label"])]),_:1},8,["modelValue"]),e(A,{modelValue:n.tab,"onUpdate:modelValue":l[3]||(l[3]=o=>n.tab=o)},{default:t(()=>[(u(!0),h(F,null,z(n.dataTableStructure,(o,N)=>(u(),m(P,{key:o.key,value:`tab-${N+1}`},{default:t(()=>[(u(),m(y,{key:o.key,search:n.search,headers:n.credentialsHeaders,items:o.entries,"table-options":n.hasPendingApproval,loading:n.loadingTable,onUpdateTable:v.updateTable},{"empty-table":t(()=>[e(g,{class:"pa-8 dca-table"},{default:t(()=>[e(L,{class:"mx-auto","max-height":"99","max-width":"130",src:n.emptyTablePhoto},null,8,["src"]),e(b,{class:"strong_text pa-0 pt-2"},{default:t(()=>[i("p",ke,[d(a(s.$t(o.emptyTableMessage))+" ",1),e(M,{class:"links",style:{"font-size":"13px"},to:{path:"IssueCredentials"}},{default:t(()=>[d(a(s.$t("viewCredential.noCredentials[1]")),1)]),_:1}),d(" "+a(s.$t("viewCredential.noCredentials[2]")),1)])]),_:2},1024)]),_:2},1024)]),_:2},1032,["search","headers","items","table-options","loading","onUpdateTable"]))]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,{cols:"12",md:"3",class:"pt-14 pb-8 counters"},{default:t(()=>[e(w,{class:"pt-16"},{default:t(()=>[e(c,{cols:"12",class:"pt-16 pb-2 px-0"},{default:t(()=>[e(g,null,{default:t(()=>[e(b,{class:"strong_text"},{default:t(()=>[e($),i("div",null,[i("p",null,a(n.allEntriesTable.length),1),i("span",null,a(s.$t("dashboard.counters.issued")),1)])]),_:1})]),_:1})]),_:1}),e(c,{cols:"12",class:"pt-2 pb-2 px-0"},{default:t(()=>[e(g,null,{default:t(()=>[e(b,{class:"strong_text"},{default:t(()=>[e(B),i("div",null,[i("p",null,a(n.revokedTable.length),1),i("span",null,a(s.$t("dashboard.counters.revoked")),1)])]),_:1})]),_:1})]),_:1}),e(c,{cols:"12",class:"pt-2 pb-2 px-0"},{default:t(()=>[e(g,null,{default:t(()=>[e(b,{class:"strong_text"},{default:t(()=>[e(S),i("div",null,[i("p",null,a(n.approvedTable.length),1),i("span",null,a(s.$t("dashboard.counters.approved")),1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const Ne=f(we,[["render",Le],["__file","C:/Users/guilh/Documents/EIDCMP/web-app-v3/src/views/ViewTemplate/View.vue"]]);export{Ne as default};
//# sourceMappingURL=View-CerIkM-D.js.map
