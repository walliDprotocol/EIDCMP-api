import{_ as C,d as R,q as D,u as G,a as $,r as B}from"./index-BsrjhtPE.js";import{a3 as i,a4 as m,ad as r,al as O,a5 as a,Z as V,l as n,a8 as b,a9 as o,a7 as I,ah as F,aa as W,X as l,R as w}from"./vue-BAjJ74_5.js";import{V as E,a as S,c as A,ap as N,at as k,aw as L,F as T}from"./vuetify-B6yzhMeP.js";import{_ as z}from"./logo-credential-issuers-CIGld5u7.js";/* empty css                            */const M={},U={width:"62px",height:"62px",viewBox:"0 0 62 62",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},j=O('<title>icon-revoked</title><desc>Created with Sketch.</desc><g id="icon-revoked" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="noun_Cross_304664" fill="#E95E5E" fill-rule="nonzero"><g id="Group-7"><path id="Shape" d="M62,31 C62,48.0844444 48.0844444,62 31,62 C13.9155556,62 -2.27373675e-13,48.0844444 -2.27373675e-13,31 C-2.27373675e-13,13.9155556 13.9155556,0 31,0 C48.0844444,0 62,13.9155556 62,31 Z"></path></g></g><polygon id="Path" fill="#FFFFFF" fill-rule="nonzero" points="44 20.626943 33.626943 31 44 41.373057 41.373057 44 31 33.626943 20.626943 44 18 41.373057 28.373057 31 18 20.626943 20.626943 18 31 28.373057 41.373057 18"></polygon></g>',3);function q(s,e){return i(),m("svg",U,[r(" Generator: Sketch 54.1 (76490) - https://sketchapp.com "),j])}const J=C(M,[["render",q],["__file","C:/Users/guilh/Documents/EIDCMP/web-app-v3/src/assets/icon-revoked.vue"]]),K={},Z={width:"62px",height:"62px",viewBox:"0 0 62 62",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},H=a("title",null,"icon-validated",-1),X=a("desc",null,"Created with Sketch.",-1),Q=a("g",{id:"icon-validated",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[a("g",{id:"noun_Check_2729447",fill:"#7BDD96","fill-rule":"nonzero"},[a("path",{d:"M31,62 C48.1097923,62 62,48.036036 62,31 C62,13.963964 48.1097923,0 31,0 C13.8902077,0 0,13.8708709 0,31 C0,48.1291291 13.8902077,62 31,62 Z",id:"Shape"})]),a("polygon",{id:"Path",fill:"#FFFFFF","fill-rule":"nonzero",points:"19.6275168 31.7333333 24.7013423 36.775 41.4630872 20 44 22.5666667 24.6107383 42 17 34.3916667"})],-1);function Y(s,e){return i(),m("svg",Z,[r(" Generator: Sketch 54.1 (76490) - https://sketchapp.com "),H,X,Q])}const ee=C(K,[["render",Y],["__file","C:/Users/guilh/Documents/EIDCMP/web-app-v3/src/assets/icon-validated.vue"]]),te={},se={xmlns:"http://www.w3.org/2000/svg",width:"15",height:"23",viewBox:"0 0 15 23"},ae=a("g",{fill:"none","fill-rule":"evenodd"},[a("g",{fill:"#373C43","fill-rule":"nonzero"},[a("g",null,[a("g",null,[a("path",{d:"M10.714 2.19V0H9.107C4.085 0 0 4.176 0 9.31c0 5.133 4.085 9.309 9.107 9.309h.536V23L15 17.524l-5.357-5.476v4.38h-.536c-3.84 0-6.964-3.193-6.964-7.118 0-3.926 3.124-7.12 6.964-7.12h1.607z"})])])])],-1),ne=[ae];function re(s,e){return i(),m("svg",se,[...ne])}const ie=C(te,[["render",re],["__file","C:/Users/guilh/Documents/EIDCMP/web-app-v3/src/components/ShowCredentialImages/assets/icon-rotate.vue"]]),oe={name:"ShowCredentialImages",components:{IconRotate:ie},props:{imgArray:{type:Array,required:!0},width:{type:Number,required:!0},height:{type:Number,required:!0},currentLayout:{type:String}},data(){return{flipped:!1,cardStyles:{maxHeight:`${Math.floor(this.width/Math.sqrt(2))}px`,borderRadius:this.currentLayout==="Badge"?"50%":"",margin:"0 auto"}}},computed:{hasBack(){return this.imgArray.length>1},calcWidth(){return`${Math.min(this.width,screen.availWidth-32)}px`}},created(){},methods:{}},le={class:"flipper"},ce={class:"front"},de={key:0,class:"back"};function me(s,e,c,d,t,p){const _=V("IconRotate");return i(),m("div",{class:I(t.flipped?"flip-container flipped":"flip-container"),style:F({...t.cardStyles,width:p.calcWidth})},[a("div",le,[a("div",ce,[n(E,{class:"background-img",contain:"",src:c.imgArray[0],"max-width":c.width,"max-height":c.height},null,8,["src","max-width","max-height"]),p.hasBack?(i(),b(S,{key:0,id:"flip-btn",class:"rotate-btn",ripple:!1,text:"",onClick:e[0]||(e[0]=v=>t.flipped=!0)},{default:o(()=>[n(_)]),_:1})):r("v-if",!0)]),p.hasBack?(i(),m("div",de,[n(E,{class:"background-img",src:c.imgArray[1],"max-width":c.width},null,8,["src","max-width"]),p.hasBack?(i(),b(S,{key:0,id:"flip-btn",class:"rotate-btn",ripple:!1,text:"",onClick:e[1]||(e[1]=v=>t.flipped=!1)},{default:o(()=>[n(_)]),_:1})):r("v-if",!0)])):r("v-if",!0)])],6)}const fe=C(oe,[["render",me],["__scopeId","data-v-b4abaedd"],["__file","C:/Users/guilh/Documents/EIDCMP/web-app-v3/src/components/ShowCredentialImages/ShowCredentialImages.vue"]]),h=R("Verify"),pe={name:"Verify",components:{IconRevoked:J,IconValidated:ee,ShowCredentialImages:fe},data(){return{proof:null,stamp:!1,slide:!1,isValid:!1,frontTemplate:[],backTemplate:null,frontend_props:null,userData:{},WAITING_WALLET:D.WAITING_WALLET,PENDING:D.PENDING_APPROVAL,REVOKED:D.REVOKED,ACTIVE:D.APPROVED,statusVerify:null,pdf_url:null,A4ratio:1.4142,imgArray:[]}},head(){return{title:`${this.name||""} Verify`,meta:[{name:"description",content:`Connect and follow ${this.name}`},{property:"og:title",content:`${this.name} - Verify`},{property:"og:site_name",content:"Verify"},{property:"og:description",content:`Connect and follow ${this.name}`},{property:"og:type",content:"website"},{property:"og:url",content:`https://mycredentials.wallid.io/ViewCredential/${this.userData._id}`},{property:"og:image",content:this.imgArray[0]}]}},computed:{getProofShare(){return this.userData.proof_shares&&this.userData.proof_shares.slice(1)},...W(G,["showLoadingScreen"])},created(){},async mounted(){h(`*** ${this.$options.name} ***`),this.proof=this.$route.params.assetId,h("query proof",this.$route.params);const s=await this.asyncData({assetId:this.proof});h("App Verify: assetData ",s),Object.keys(s).forEach(e=>{this[e]=s[e]}),h(this.name),this.name&&setTimeout(()=>{this.showLoadingScreen=!1,this.startAnimation()},25*100)},methods:{findName(s){if(!s)throw new Error("No user data");let e=Object.keys(s).find(d=>d.toLowerCase()==="name"||d.toLowerCase()==="nome"||d.toLowerCase()==="nombre");!e&&s.front&&(e=s.front.find(d=>d.attr.toLowerCase()==="name"||d.attr.toLowerCase()==="nome"||d.attr.toLowerCase()==="nombre"));const c=e&&e.value||s[e];return h("name",c),c},async asyncData({assetId:s}){if(s)try{const{data:e}=await $()[B]({id:s}),c=e.pdf_url,d=this.findName(e.user_data),t=e.frontend_props,p=e.frontend_props.customTemplateName,_=e.ca_photo,v=e.imgArray;let u=[];if(e.user_data.front&&Array.isArray(e.user_data.front))u=[...e.user_data.front];else{const y=JSON.parse(JSON.stringify(e.user_data));if(delete y.tables,e.template_itens)for(let g=0;g<e.template_itens.length;g++){const f=e.template_itens[g];y[f.attr]&&f.order>-1?u[f.order]={attr:f.attr,value:y[f.attr]}:y[f.attr]&&u.push({attr:f.attr,value:y[f.attr]})}else for(const[g,f]of Object.entries(y))u.push({attr:g,value:f})}let x;(e.user_data.tables||e.user_data.table)&&(x=JSON.parse(JSON.stringify(e.user_data.tables||e.user_data.table)));const P=e.status;return{userData:e,pdf_url:c,name:d,frontend_props:t,customTemplateName:p,frontTemplate:u,backTemplate:x,statusVerify:P,photoURL:_,imgArray:v}}catch{}},startAnimation(){this.stamp=!0,setTimeout(()=>{this.moveToSide(),h("callback one")},1*1e3)},moveToSide(){h("callback two"),this.slide=!0}}},ue={class:"verify"},he={class:"d-flex align-center justify-center"},_e={class:"title_header"},ye={key:2,class:"state revoked mb-1 mt-5",style:{"font-size":"14px"}},ve={key:3,class:"state mb-1 mt-5",style:{"font-size":"14px"}},ge={key:0,style:{"font-weight":"600"}},we={class:"state my-1"},ke={key:4,class:"state my-1"},be={key:5,class:"state my-1"},Ce={class:"state my-1"},De={class:"state my-1"};function Ve(s,e,c,d,t,p){const _=V("ShowCredentialImages"),v=V("IconValidated"),u=V("IconRevoked");return i(),m("div",ue,[n(A,{class:"pt-md-10 pa-0 pa-md-3"},{default:o(()=>[n(N,{justify:"center"},{default:o(()=>[n(k,{cols:"12",class:"pl-9 grey-background"},{default:o(()=>[a("div",he,[n(E,{alt:"Wallid Logo",class:"shrink mr-1",contain:"",src:z,transition:"scale-transition",width:"130"})])]),_:1})]),_:1}),n(N,{justify:"center",class:I(["pt-md-6",{slide:t.slide}])},{default:o(()=>[n(k,{cols:"12",md:"6",class:"header"},{default:o(()=>[a("h1",_e,l(s.$t("verify.title",{name:s.name||s.$t("verify.fillName"),credName:t.userData.template_name,caName:t.userData.ca_name})),1)]),_:1}),n(k,{cols:"12",md:"12",class:"pb-16 pt-md-10"},{default:o(()=>[n(L,{class:I(["back-card py-2",{slide:t.slide}])},{default:o(()=>[n(A,{class:""},{default:o(()=>[n(N,{justify:"space-between"},{default:o(()=>[s.customTemplateName==="templateEditor"?(i(),b(k,{key:0,cols:"12",md:"4",class:"pa-0 pa-md-3 pt-md-5"},{default:o(()=>[n(_,{class:"id-card","img-array":t.imgArray,"current-layout":t.frontend_props.currentLayout,width:530,height:374},null,8,["img-array","current-layout"])]),_:1})):r("v-if",!0),n(k,{cols:"12",md:"8",class:"more-info text-center pl-md-10 mt-10 mt-md-0"},{default:o(()=>[n(L,{flat:""},{default:o(()=>[[t.PENDING,t.ACTIVE,t.WAITING_WALLET].includes(t.statusVerify)?(i(),b(v,{key:0,class:"over-top"})):!t.isValid&&t.statusVerify===t.REVOKED?(i(),b(u,{key:1,class:"over-top"})):r("v-if",!0),r(` <p
                      v-if="statusVerify === PENDING"
                      class="state mb-1 mt-5"
                      style="font-size: 14px"
                    >
                      {{
                        $t('verify.pending[0]', {
                          credName: userData.template_name,
                        })
                      }}
                      <span v-if="name" style="font-weight: 600">
                        {{ $t('verify.pending[1]', { name }) }}
                      </span>
                      {{
                        $t('verify.pending[2]', { caName: userData.ca_name })
                      }}
                    </p> `),!t.isValid&&t.statusVerify===t.REVOKED?(i(),m("p",ye,l(s.$t("verify.revoked",{credName:t.userData.template_name,caName:t.userData.ca_name,expDate:t.userData.exp_date})),1)):r("v-if",!0),[t.PENDING,t.ACTIVE,t.WAITING_WALLET].includes(t.statusVerify)?(i(),m("p",ve,[w(l(s.$t("verify.valid[0]",{credName:t.userData.template_name}))+" ",1),s.name?(i(),m("span",ge,l(s.$t("verify.valid[1]",{name:s.name})),1)):r("v-if",!0),w(" "+l(s.$t("verify.valid[2]",{caName:t.userData.ca_name}))+". ",1)])):r("v-if",!0),n(T,{class:"my-3"}),r(` <p class="state my-2" style="font-size: 14px">
                      {{ $t('verify.more_info.title') }}
                    </p>
                    <p class="state my-1">
                      {{ $t('verify.more_info.smart_contract') }}

                      <span>{{ userData.ca_contract_address }} </span>
                    </p> `),a("p",we,[w(l(s.$t("verify.more_info.template_id"))+" ",1),a("span",null,l(t.userData.tid),1)]),t.userData.verify?(i(),m("p",ke,[w(l(s.$t("verify.more_info.data_hash"))+" ",1),a("span",null,l(t.userData.verify.credential_sod),1)])):r("v-if",!0),t.userData.credential_sig?(i(),m("p",be,[w(l(s.$t("verify.more_info.signature"))+" ",1),a("span",null,l(t.userData.credential_sig),1)])):r("v-if",!0),r(` <a
                      v-if="statusVerify !== PENDING"
                      class="state my-2"
                      :class="statusVerify !== PENDING ? '' : 'disable-link'"
                      target="_blank"
                      :href="blockURL"
                    >
                      <v-icon class="status-verify">mdi-checkbox-blank-circle</v-icon>
                      {{ $t('verify.more_info.verify') }}

                      <IconLink class="" />
                    </a> `),r(` <a
                      v-if="statusVerify === PENDING"
                      class="state my-2"
                      :class="statusVerify !== PENDING ? '' : 'disable-link'"
                      target="_blank"
                      :href="blockURL"
                    >
                      <v-icon class="status-verify">mdi-checkbox-blank-circle</v-icon>
                      {{ $t('verify.more_info.blockchain') }}
                    </a> `),n(T,{class:"my-3"}),a("p",Ce,l(s.$t("verify.more_info.check_owner")),1),a("p",De,l(s.name),1),r(` <a
                      v-for="(link, index) in getProofShare"
                      :key="index"
                      class="state my-2"
                      :href="link.url"
                    >
                      {{ link.url }}

                      <IconLink class="" />
                    </a> `)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["class"])]),_:1})]),_:1},8,["class"])]),_:1})])}const Ae=C(pe,[["render",Ve],["__file","C:/Users/guilh/Documents/EIDCMP/web-app-v3/src/views/Verify/index.vue"]]);export{Ae as default};
//# sourceMappingURL=index-wCVBPwxs.js.map
