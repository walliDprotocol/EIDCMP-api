import{_ as V,d as N,l as p,i as f,j as b,n as B}from"./index-BsrjhtPE.js";import{Z as v,a3 as g,a8 as D,a9 as o,A as U,a5 as a,W as x,a6 as w,ad as E,o as A,l as t,X as i,D as L,aa as P,aq as R,R as y,a7 as k,a4 as j,ah as O}from"./vue-BAjJ74_5.js";import{a as q,b as u,c as z}from"./designPresets-qN0au2g4.js";import{I as G}from"./icon-close-pH6A5HBf.js";import{I as W}from"./icon-sucessfully-CO2Tb8FD.js";import{ar as H,c as S,at as n,a as F,aw as X,ap as C,aG as Z,aH as _,V as T,B as J}from"./vuetify-B6yzhMeP.js";/* empty css                            */const K={name:"SuccessModal",components:{IconClose:G,IconSuccess:W},props:{designType:{},message:{required:!0}},data(){return{}},computed:{},watch:{},created(){},methods:{close(){this.$emit("close")}}},Q={class:"modal-backdrop"},Y={id:"modalTitle",class:"modal-header"},ee={class:"modal-body text-center px-14 pb-9"},se={class:"subtitle_header mx-auto pa-4"},te={class:"subtitle_text px-16"};function le(e,s,d,I,l,c){const h=v("IconClose"),r=v("IconSuccess");return g(),D(A,{name:"modal-fade",persisted:""},{default:o(()=>[U(a("div",Q,[a("div",{class:"modal-wallid success_modal",role:"dialog","aria-labelledby":"modalTitle","aria-describedby":"modalDescription",onClick:s[1]||(s[1]=x(()=>{},["stop"]))},[a("header",Y,[w(e.$slots,"header",{},()=>[t(H),a("button",{type:"button",class:"btn-close","aria-label":"Close modal",onClick:s[0]||(s[0]=(...M)=>c.close&&c.close(...M))},[t(h)])])]),a("div",ee,[w(e.$slots,"body",{},()=>[t(r),a("h2",se,i(e.$t(`successModal.${d.message}.title`)),1),a("p",te,i(e.$t(`successModal.${d.message}.text`,{designType:d.designType})),1)])]),E(`  <div class="modal-footer">\r
          <slot name="footer">\r
          <v-row class="justify-end" no-gutters>\r
              <v-btn class="next" :disabled="isDisabled" @click="nextStep()">\r
                {{ textButtonNext }}\r
              </v-btn>\r
            </v-row>\r
          </slot>\r
        </div> `)])],512),[[L,!0]])]),_:3})}const oe=V(K,[["render",le],["__file","C:/Users/guilh/Documents/EIDCMP/web-app-v3/src/modals/SuccessModal.vue"]]),$=N("ChoosePresetTemplate"),m="http://127.0.0.1:3000/api/v1/assets",ae={components:{SuccessModal:oe},data(){return{designType:"Badge",designTypeError:!1,templateName:null,templateNameError:!1,photoFromFile:null,photoFile:null,photoFileError:!1,hasErrors:!1,errorMsg:null,loading:!1,message:"design",showConfirmCreateModal:!1,tid:null,timeout:null,API_URL_ASSETS:m}},computed:{isDisabled(){return this.designTypeError||this.templateNameError||this.photoFileError},...P(p,["layoutBackgroundColor"]),...R(p,["setTemplate"])},mounted(){const e=document.getElementById("fileUpload");e&&e.addEventListener("change",s=>{s.target.files.length!==0&&(this.photoFile=s.target.files[0],this.photoFromFile=URL.createObjectURL(this.photoFile),this.photoFileError=!1)})},methods:{handleClose(){$("handleClose",this.tid),clearTimeout(this.timeout),this.tid&&this.$router.push({name:"ViewTemplate",params:{tid:this.tid}})},validateDesign(){return this.hasErrors=!1,this.designType||(this.designTypeError=!0,this.hasErrors=!0),this.templateName||(this.templateNameError=!0,this.hasErrors=!0),this.photoFile||(this.photoFileError=!0,this.hasErrors=!0),!this.hasErrors},async addDesign(){if(this.loading=!0,!!this.validateDesign())try{this.$debug("addDesign",this.designType);let e;switch(this.designType){case"Badge":e=`${m}/backgrounds/badge-design.png`,u.components[1].src=await f()[b]({file:this.photoFile,folder:"logos"}).catch(d=>{}),this.setTemplate(u);break;case"Certificate":e=`${m}/backgrounds/certificate-design.png`,z.components[1].src=await f()[b]({file:this.photoFile,folder:"logos"}).catch(d=>{}),this.setTemplate(u);break;case"Card":e=`${m}/backgrounds/card-design.png`,q.components[7].src=await f()[b]({file:this.photoFile,folder:"logos"}).catch(d=>{}),this.setTemplate(u),this.layoutBackgroundColor="transparent";break;default:break}p().setTemplateName(this.templateName);const{tid:s}=await p()[B]({preview:e});$(s),this.tid=s,this.showConfirmCreateModal=!0,this.timeout=setTimeout(()=>{this.handleClose()},1e3*3)}catch{}finally{this.loading=!1}},chooseFiles(){document.getElementById("fileUpload").click()}}},re={class:"title_header"},ie={class:"subtitle_text_strong"},ne={class:""},de=a("span",{style:{color:"#e95e5e"}}," * ",-1),ce={class:"wrapper"},pe={class:"small_text"},ue={class:"mb-0 small_text"},me={class:"small_text"},ge=a("input",{id:"fileUpload",type:"file",hidden:"",accept:"image/x-png,image/gif,image/jpeg"},null,-1);function he(e,s,d,I,l,c){const h=v("SuccessModal");return g(),D(S,{class:"preset px-0"},{default:o(()=>[t(C,null,{default:o(()=>[t(n,{cols:"6",class:""},{default:o(()=>[a("h2",re,i(e.$t("credentialDesign.preset.ChoosePresetTemplate")),1)]),_:1}),t(n,{cols:"6",class:"text-right"},{default:o(()=>[t(F,{disabled:c.isDisabled,loading:l.loading,class:"next",onClick:c.addDesign},{default:o(()=>[y(i(e.$t("credentialDesign.addDesignButton")),1)]),_:1},8,["disabled","loading","onClick"])]),_:1}),t(n,{cols:"12",class:""},{default:o(()=>[t(X,{elevation:"0"},{default:o(()=>[t(S,{class:"text-left"},{default:o(()=>[t(C,null,{default:o(()=>[t(n,{cols:"12",class:""},{default:o(()=>[a("h3",ie,i(e.$t("credentialDesign.preset.subtitle")),1)]),_:1}),t(n,{cols:"12",md:"10",class:"input-field pr-md-10"},{default:o(()=>[t(Z,{modelValue:l.designType,"onUpdate:modelValue":s[0]||(s[0]=r=>l.designType=r),row:"","hide-details":"",class:k([{"error-radio":l.designTypeError},"mt-0"]),onChange:s[1]||(s[1]=r=>l.designTypeError=!1)},{default:o(()=>[t(_,{color:"#009fb1",label:e.$t("credentialDesign.preset.types[0]"),value:e.$t("credentialDesign.preset.types[0]")},null,8,["label","value"]),t(_,{color:"#009fb1",label:e.$t("credentialDesign.preset.types[1]"),value:e.$t("credentialDesign.preset.types[1]")},null,8,["label","value"]),t(_,{color:"#009fb1",label:e.$t("credentialDesign.preset.types[2]"),value:e.$t("credentialDesign.preset.types[2]")},null,8,["label","value"])]),_:1},8,["modelValue","class"])]),_:1}),t(n,{cols:"12",md:"10",class:"d-flex justify-space-between align-start flex-wrap pr-md-10"},{default:o(()=>[t(T,{"max-width":"186px",contain:"",src:`${l.API_URL_ASSETS}/backgrounds/badge-design.png`,onClick:s[2]||(s[2]=r=>l.designType=e.$t("credentialDesign.preset.types[0]"))},null,8,["src"]),t(T,{"max-width":"270px",contain:"",src:`${l.API_URL_ASSETS}/backgrounds/certificate-design.png`,onClick:s[3]||(s[3]=r=>l.designType=e.$t("credentialDesign.preset.types[1]"))},null,8,["src"]),t(T,{"max-width":"270px",contain:"",src:`${l.API_URL_ASSETS}/backgrounds/card-design.png`,onClick:s[4]||(s[4]=r=>l.designType=e.$t("credentialDesign.preset.types[2]"))},null,8,["src"])]),_:1})]),_:1}),t(C,{class:"mt-10"},{default:o(()=>[t(n,{cols:"12",class:"input-field"},{default:o(()=>[a("label",ne,[y(i(e.$t(`credentialDesign.preset.label.${l.designType}`)),1),de]),t(J,{modelValue:l.templateName,"onUpdate:modelValue":s[5]||(s[5]=r=>l.templateName=r),class:"mt-2",flat:"",solo:"",error:l.templateNameError,onInput:s[6]||(s[6]=r=>l.templateNameError=!1)},null,8,["modelValue","error"])]),_:1}),t(n,{cols:"12",class:"input-field"},{default:o(()=>[a("div",ce,[l.photoFromFile?(g(),j("div",{key:0,class:"uploaded-image",style:O(`background-image: url('${l.photoFromFile}')`)},null,4)):E("v-if",!0),a("p",pe,i(e.$t(`credentialDesign.preset.photoLabel.${l.designType}`)),1),a("p",ue,i(e.$t("createCertModal.upload[1]")),1),a("p",me,i(e.$t("createCertModal.upload[2]")),1),ge,t(F,{class:k(["back",{"error-btn":l.photoFileError}]),onClick:s[7]||(s[7]=r=>c.chooseFiles())},{default:o(()=>[y(i(e.$t("credentialDesign.uploadLogo")),1)]),_:1},8,["class"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l.showConfirmCreateModal?(g(),D(h,{key:0,message:l.message,"design-type":l.designType.toLowerCase(),onClose:s[8]||(s[8]=r=>c.handleClose())},null,8,["message","design-type"])):E("v-if",!0)]),_:1})}const De=V(ae,[["render",he],["__file","C:/Users/guilh/Documents/EIDCMP/web-app-v3/src/views/CredentialDesign/ChoosePresetTemplate.vue"]]);export{De as default};
//# sourceMappingURL=ChoosePresetTemplate-uu_3QZgH.js.map
